import Swiper from"../plugins/swiper/swiper-bundle.min.js";const html=document.body.parentNode;let fixedElementsQuery=["body","#header"],fixedElements=[];const initFixedElements=()=>{const e=[];fixedElementsQuery.forEach((t=>{const i=document.querySelector(t),n=i?Number(window.getComputedStyle(i,null).getPropertyValue("padding-right")?.replace(/\D/gm,"")):"0px";i&&e.push({el:i,paddingRight:n})})),fixedElements=e},lockScreen=()=>{html.classList.add("lock"),fixedElements.forEach((e=>{e.el.style.paddingRight=Number(e.paddingRight+getScrollSize())+"px"}))},unLockScreen=()=>{html.classList.remove("lock"),fixedElements.forEach((e=>{e.el.style.paddingRight=e.paddingRight+"px"}))},getScrollSize=()=>{let e=document.createElement("div"),t=0;return e.style="position: fixed; overflow: scroll; pointer-events:none; opacity:0;",document.body.appendChild(e),t=e.offsetWidth-e.clientWidth,document.body.removeChild(e),t},insertPlaceholder=(e,t,i=!0)=>{const n=e.parentNode,o=document.createElement("div"),a=document.getElementById(t);i&&(o.classList=e.classList),o.style.maxWidth="100%",o.style.width=e.offsetWidth+"px",o.style.height=e.offsetHeight+"px",t&&o.setAttribute("id",t),a&&a.remove(),n.insertBefore(o,e.nextSibling)};document.addEventListener("DOMContentLoaded",(function(){var e,t;document.body.classList.remove("no-js"),e=function(e){document.querySelector("body").classList.add(e?"webp":"no-webp")},(t=new Image).onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA";const i=document.getElementById("header");function n(){insertPlaceholder(i,"header-placeholder",!1)}n(),window.addEventListener("resize",n);const o=document.querySelector("#header-burger"),a=document.querySelector("#header-menu");o.addEventListener("click",(()=>{a.classList.toggle("active"),o.classList.contains("active")?(o.classList.remove("active"),o.classList.add("close"),unLockScreen()):(o.classList.remove("close"),o.classList.add("active"),lockScreen())}));document.querySelectorAll(".reviews__slider").forEach((e=>{new Swiper(e.querySelector(".swiper"),{direction:"horizontal",loop:!1,slidesPerView:1.4,centeredSlides:!0,spaceBetween:10,pagination:{el:e.querySelector(".swiper-pagination"),clickable:!0},navigation:{nextEl:e.querySelector(".swiper-button-next"),prevEl:e.querySelector(".swiper-button-prev")},breakpoints:{576:{slidesPerView:2,spaceBetween:15,centeredSlides:!1,loop:!0},992:{slidesPerView:3,centeredSlides:!1,loop:!0}}})}));const s=document.querySelectorAll(".popup[id]"),l=document.querySelectorAll("[data-popup]");let c=null;function r(e){e.target===this&&e.target.classList.contains("out")&&(this.classList.remove("out","active"),c===this&&unLockScreen())}function d(e){const t=e?document.getElementById(e):this.closest(".popup");t&&(t.classList.add("out"),t.querySelectorAll("video")?.forEach((e=>e.pause())))}s.forEach((e=>{const t=e.getAttribute("id"),i=e.querySelector(".popup__content"),n=e.querySelectorAll("[data-close]");e.onclick=()=>d(t),e.addEventListener("animationend",r),n.forEach((e=>e.onclick=()=>d(t||n.closest(".popup").getAttribute("id")))),i.onclick=e=>e.stopPropagation()})),l.forEach((e=>{const t=e.dataset.popup;document.getElementById(t)?e.onclick=()=>{!function(e,t=!0,i=null){const n=document.getElementById(e);if(!n||n.classList.contains("active")&&!n.classList.contains("out"))return;o(),void document.querySelectorAll(".popup.active").forEach((e=>d(e.getAttribute("id")))),t&&lockScreen();function o(){const e=n.querySelector(".popup__title");e&&(!n.dataset.title&&i&&(n.dataset.title=e?e.innerHTML:""),(i||n.dataset.title)&&(e.innerHTML=i||n.dataset.title))}c=n,n.classList.remove("out","active"),n.classList.add("active"),n.querySelector("video[data-autoplay]")?.play()}(t,!e.closest(".popup"),e.dataset.popupTitle?e.dataset.popupTitle:null)}:e.classList.add("disabled")}));const u=document.querySelectorAll(".accordion,[data-accordion]");function p(e){const t={duration:180,fill:"forwards"},i=e.querySelectorAll(".accordion-item,[data-accordion-item]"),n=e.querySelector(".accordion-item.default,[data-accordion-item-default]"),o=(e,i)=>{i.animate({height:"0px"},t),e.classList.remove("open")},a=!!e.dataset.only;if(i.forEach((e=>{const n=e.querySelector(".accordion-item__header,[data-accordion-item-header]"),s=e.querySelector(".accordion-item__content,[data-accordion-item-content]");n.onclick=()=>{a&&((...e)=>{for(let t=0;t<i.length;t++){const n=i[t],a=n.querySelector(".accordion-item__content,[data-accordion-item-content]");e.find((e=>e===n))||o(n,a)}})(e),e.classList.contains("open")?o(e,s):((e,i)=>{i.animate({height:`${i.scrollHeight}px`},t),e.classList.add("open")})(e,s)}})),n){n.querySelector(".accordion-item__header,[data-accordion-item-header]").click()}}function h(e){const t=e.dataset.availableTo?e.dataset.availableTo:void 0;let i=!0;t&&t<=window.innerWidth&&(i=!1),i?(e.classList.remove("no-init"),p(e)):e.classList.add("no-init")}u.forEach((e=>h(e))),window.addEventListener("resize",(()=>{u.forEach((e=>h(e)))})),document.querySelectorAll('a[href^="#"]').forEach((e=>{"#"!=e.getAttribute("href")&&e.addEventListener("click",(function(e){e.preventDefault();const t=document.querySelector("header").offsetHeight,i=document.querySelector(this.getAttribute("href")).offsetTop||0;window.scrollTo({left:0,top:i-t,behavior:"smooth"})}))}));class m{valueFilter={min:0,max:void 0};constructor(e,t){this.inputLabel=e.closest(".input-label"),this.input=this.inputLabel?.querySelector("input.input-label__input"),this.inputDisplayValue=this.inputLabel?.querySelector(".input-label__value"),this.inputStep=this.input.dataset.inputStep?this.input.dataset.inputStep:1,this.actionEl=e,this.actionType=t}init(){this.actionEl.addEventListener("click",(e=>{e.preventDefault(),this.actionHandler(this.actionType)})),"number"==this.input.getAttribute("type")&&this.initNumberInput()}actionHandler(e){switch(e){case"reset":this.reset();break;case"plus":this.plus();break;case"minus":this.minus()}}initNumberInput(){this.initFilter(),this.input.onfocus=()=>{this.input.select()},this.input.onchange=()=>{this.inputNumberFilter(),this.updateValueDisplay()},window.onkeydown=e=>{"Enter"==e.key&&document.activeElement==this.input&&this.input.blur()}}reset(){this.input.value=""}plus(){this.input.value=Number(this.input.value)+Number(this.inputStep),this.inputNumberFilter(),this.updateValueDisplay()}minus(){this.input.value=Number(this.input.value)-Number(this.inputStep),this.inputNumberFilter(),this.updateValueDisplay()}initFilter(){const e=this.input.dataset;for(const t in this.valueFilter){const i="input"+t[0].toUpperCase()+t.substring(1);e[i]&&(this.valueFilter[t]=e[i])}}inputNumberFilter(){const e=this.valueFilter;let t=this.input.value;void 0!==e.min&&(t=Math.max(t,e.min)),void 0!==e.max&&(t=Math.min(t,e.max)),this.input.value=t}updateValueDisplay(){this.inputDisplayValue&&(this.inputDisplayValue.innerHTML=this.input.value)}}class v{constructor(e,t){this.input=e,this.validateType=t}init(){this.input.addEventListener("change",(e=>this.change(e)))}change(){}}class f extends v{constructor(e,t){super(e,t)}change(e){const t=e.target.value;let i=t;"@"!=t[0]&&(i="@"+i),this.input.value=i}}document.querySelectorAll("[data-input-action]").forEach((e=>{new m(e,e.dataset.inputAction).init()}));document.querySelectorAll("[data-input-validate]").forEach((e=>{const t=e.dataset.inputValidate;let i;if("telegram"===t)i=new f(e,t);else i=new v(e,t);i.init()}));document.querySelectorAll(".selector-wrapper").forEach((e=>function(e){const t=e.querySelector("select"),i=e.querySelector(".selector"),n=i.querySelector(".selector__input"),o=i.querySelector(".selector__list-wrapper"),a=i.querySelectorAll("button.selector__option"),s={value:i.querySelector(".selector__value"),tag:i.querySelector(".selector__tag-value")},l=[{height:0,opacity:0},{height:o.scrollHeight+"px",opacity:1}],c={duration:200,iterations:1,fill:"forwards"};let r=!1;function d(){if(r)return;let e=[...l];r=!0,n.classList.contains("active")&&e.reverse();o.animate(e,c).finished.finally((()=>{r=!1})),n.classList.toggle("active")}function u(e){p(e),h(e)}function p(e){a.forEach((e=>e.classList.remove("active"))),e.classList.add("active"),n.focus(),d()}function h(e){const i=e.dataset.value,n={value:e.querySelector(".selector__option-value")?e.querySelector(".selector__option-value").cloneNode(!0):document.createElement("span"),tag:e.querySelector(".tag")?e.querySelector(".tag").cloneNode(!0):document.createElement("span")};t.value=i,s.value.innerHTML=s.tag.innerHTML="",s.value.appendChild(n.value),s.tag.appendChild(n.tag)}n.onclick=d,a.forEach((e=>e.onclick=()=>u(e)))}(e)));const y=document.querySelectorAll("[data-roll]");function g(e){const t=e.dataset.maxBp,i=window.innerWidth;let n=!0;t&&t<=i&&(n=!1),n?function(e){const t=e.dataset.roll,i=e.scrollHeight,n="Развернуть",o="Свернуть",a=[{height:t+"px"},{height:i+"px"}],s={duration:300,fill:"forwards",iterations:1};let l=null;function c(){const t=e.classList.contains("opened")?"close":"open";"open"==t&&(e.animate(a,s),e.classList.add("opened"),l.innerHTML=o),"close"==t&&(e.animate([...a].reverse(),s),e.classList.remove("opened"),l.innerHTML=n)}i>t&&(function(){const t=document.createElement("button"),i=document.createElement("div");i.classList.add("roll-mask"),e.dataset.rollBg&&(i.style=`background: linear-gradient(180deg, rgba(255,255,255,0) 0%, ${e.dataset.rollBg} 100%);`),t.type="button",t.classList.add("roll-btn"),t.innerHTML=n,t.addEventListener("click",c),l=t,e.parentNode.querySelector(".roll-btn")?.remove(),e.querySelector(".roll-mask")?.remove(),e.appendChild(i),e.parentNode.appendChild(t)}(),e.style="",e.classList.add("roll-content"),e.classList.add("opened"),c())}(e):function(e){const t=e.parentNode;[".roll-btn",".roll-mask"].forEach((e=>{t.querySelectorAll(e)?.forEach((e=>e.remove()))})),e.style="height: auto !important;",e.classList.remove("roll-content"),e.classList.remove("opened")}(e)}y.forEach((e=>g(e))),window.addEventListener("resize",(()=>{y.forEach((e=>g(e)))}));document.querySelectorAll(".notification").forEach((e=>function(e){if(localStorage.getItem(e.dataset.name))return void e.remove();!function(e){const t=e.querySelector(".notification__close-btn"),i=e.dataset.name;t.onclick=t=>{t.preventDefault(),i&&localStorage.setItem(i,!0),e.classList.add("close"),setTimeout((()=>e.remove()),500)}}(e)}(e)));const b=document.getElementById("mobile-nav");function L(){insertPlaceholder(b,"mobile-nav-placeholder",!1)}L(),window.addEventListener("resize",L);const S=document.querySelectorAll(".tabs");function E(e){const t={duration:200,easing:"cubic-bezier(.25,.75,.5,1)",fill:"forwards"},i=e.querySelector(".tabs__content"),n=e.querySelectorAll("[data-tab]"),o=e.querySelector(".tabs__controlls"),a=[];let s=null,l=!0;const c=async e=>{e&&e!==s&&l&&(l=!1,s&&await(async(e,n={})=>new Promise((o=>{i.style.minHeight=n.scrollHeight<e.scrollHeight?n.scrollHeight+"px":e.scrollHeight+"px",a.find((t=>t.dataset.tabOpen===e.dataset.tab))?.classList.remove("active"),e.classList.remove("active"),e.classList.remove("finished"),e.animate({height:"0px"},t),setTimeout((()=>o()),200)})))(s,e),a.find((t=>t.dataset.tabOpen===e.dataset.tab))?.classList.add("active"),e.classList.add("active"),e.animate({height:e.scrollHeight+"px"},t).finished.then((()=>{e.classList.add("finished"),l=!0})),s=e)};o.innerHTML="",n.forEach((e=>{const t=document.createElement("button");t.classList.add("btn","tabs__btn"),t.innerHTML=e.dataset.tabName,t.dataset.tabOpen=e.dataset.tab,t.onclick=()=>c(e),a.push(t),o.appendChild(t)})),a.forEach((e=>e.classList.remove("active"))),n.forEach((e=>{e.classList.remove("active"),e.classList.remove("finished")})),c(n[0])}S.forEach((e=>E(e))),window.addEventListener("resize",(()=>{S.forEach((e=>E(e)))})),initFixedElements()}));